# Transaction Analyzer

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ üìö

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç–∞—Ç—É—Å-–ø—Ä–æ–µ–∫—Ç–∞)
- [–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](#—Å—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#–æ—Å–Ω–æ–≤–Ω–æ–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ê–≤—Ç–æ—Ä](#–∞–≤—Ç–æ—Ä)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## –û –ø—Ä–æ–µ–∫—Ç–µ
**Transaction Analyzer** ‚Äî—É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Python –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ Excel-—Ñ–∞–π–ª–æ–≤. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–∞–±–æ—Ç–∞ —Å JSON / CSV / Excel
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- –í—ã–≤–æ–¥ —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–∞–ª—é—Ç –∏ –∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ API
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é pytest

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ 
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω 

üéì –£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Python 3.10+
- Poetry
- Pytest
- Pandas
- JSON / CSV / Excel
- REST API

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
src/
  
    ‚îú‚îÄ utils/               
    ‚îú‚îÄ views/               
    ‚îú‚îÄ services/            
    ‚îú‚îÄ reports/             
    ‚îî‚îÄ main.py  
 
tests/


## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: 
```bash
git clone https://github.com/kshaab/Transaction-Analyzer
cd crswrk_1
```
2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
poetry install
poetry shell
```
3. –ó–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞: 
```bash 
python src/main.py
```

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
 
### üî∏ Utils

`read_excel(excel_file)` 

–ß–∏—Ç–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ Excel.

```python
>>> read_excel(excel_data)
```

`read_json(json_file)` 

–ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```python
>>> read_json(json_data)
```

`filter_by_date(df, date)`

–§–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ.

```python
>>> filter_by_date(df, date)
```

`view_cards_info(df, date)`

–í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–∞—Ä—Ç–∞–º.

```python
>>> view_cards_info(read_data, required_date)
{'last_digits': '4556', 'total_spent': 703.0, 'cashback': 7}
```

`search_top(df, date)`

–°–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ø-5 –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—É–º–º–µ. 

```python
>>> search_top(read_data, required_date)
{"date": "2020-11-02", "amount": 703.0, "category": "–ê–ø—Ç–µ–∫–∏", "description": "–ê–ø—Ç–µ–∫–∞ –í–∏—Ç–∞"}, {"date": "2020-11-05", "amount": 462.0, "category": "–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã", "description": "WILDBERRIES"} –∏ —Ç.–¥.
```

`view_exchange_rate(settings)`

–¢–µ–∫—É—â–∏–π –∫—É—Ä—Å –≤–∞–ª—é—Ç.

```python
>>> view_exchange_rate(read)
[{'currency': 'USD', 'rate': 79.38}, {'currency': 'EUR', 'rate': 93.25}]
```

`view_stock_prices(settings)`
–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–∫—Ü–∏–π.

```python
>>> view_stock_prices(read)
{"stock": "AAPL", "price": 213.88}, {"stock": "AMZN", "price": 231.44}
```

### üî∏ Views

`greeting` 

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫. 

```python
current_time = 13:00:00 
>>> greeting()
"–î–æ–±—Ä—ã–π –¥–µ–Ω—å"
```

`view_homepage` 

–§–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–æ—Ç–≤–µ—Ç –¥–ª—è –¥–æ–º–∞—à–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```python
>>> view_homepage(input_date)
```

### üî∏ Services

`get_transactions(month: str, excel_file)` 

–°–±–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ Excel.

```python
>>> get_transactions("2021-11", excel_data)
```

`investment_bank(month: str, transactions, limit)` 

–°—É–º–º–∞, –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –≤ –ò–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫—É. 

```python
>>> investment_bank("2021-11", transactions, 10)
653.71
```

`find_phone_transactions(excel_file)`

–ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏.

```python
>>> find_phone_transactions(excel_data)
{"transactions": [{"date": "19.11.2021", "amount": 200.0, "description": "–¢–∏–Ω—å–∫–æ—Ñ—Ñ –ú–æ–±–∞–π–ª +7 995 555-55-55"}, {"date": "19.11.2021", "amount": 200.0, "description": "–¢–∏–Ω—å–∫–æ—Ñ—Ñ –ú–æ–±–∞–π–ª +7 995 555-55-55"} –∏ —Ç.–¥.
```

### üî∏ Reports

`save_report_to_file(file = None)`

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞.

`spending_by_category(t, category, date = None)`

–¢—Ä–∞—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞.

```python
>>> spending_by_category(transactions, "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "2019-11-16")
{"–∫–∞—Ç–µ–≥–æ—Ä–∏—è": "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "—Å": "2019-08-18", "–ø–æ": "2019-11-16", "—Ç—Ä–∞—Ç –≤—Å–µ–≥–æ": 7795.43, "—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π": 49}
```

### üî∏ Main

`main()`

–ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Poetry.
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `pyproject.toml` 


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ pytest.

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
pytest tests/ -v
```

## –ê–≤—Ç–æ—Ä
[–ö—Å–µ–Ω–∏—è](https://github.com/kshaab)

## –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö.
